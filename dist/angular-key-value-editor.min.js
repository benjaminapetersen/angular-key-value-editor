!function(){"use strict";angular.module("key-value-editor",["as.sortable"])}(),function(){"use strict";angular.module("key-value-editor").directive("keyValueEditor",["$compile","$log","$templateCache","$timeout","$window","keyValueEditorConfig","keyValueEditorUtils",function(e,o,r,a,t,n,l){var i=l.first,u=l.contains,c=l.each,d=1e3,s=25,y=function(){return{name:"",value:""}},v=function(e,o){e&&e.push(o||y())},V=function(e,o){a(function(){var r=i(t.document.querySelectorAll(e));r&&(r.focus(),o&&(r.value="",r.value=o))},s)},f=function(e,o){return"key-value-editor-key-"+e+"-"+o},k=function(e,o){return"key-value-editor-value-"+e+"-"+o},p=function(e,o,r){e in o&&(o[e]||(r[e]=!0))};return{restrict:"AE",scope:{keyMinlength:"@",keyMaxlength:"@",valueMinlength:"@",valueMaxlength:"@",entries:"=",keyPlaceholder:"@",valuePlaceholder:"@",keyValidator:"@",keyValidatorRegex:"=",valueValidator:"@",valueValidatorRegex:"=",keyValidatorError:"@",keyValidatorErrorTooltip:"@",keyValidatorErrorTooltipIcon:"@",keyIconTooltip:"@",valueValidatorError:"@",valueValidatorErrorTooltip:"@",valueValidatorErrorTooltipIcon:"@",valueIconTooltip:"@",cannotAdd:"=?",cannotSort:"=?",cannotDelete:"=?",isReadonly:"=?",isReadonlyKeys:"=?",addRowLink:"@",showHeader:"=?",allowEmptyKeys:"=?",keyRequiredError:"@"},link:function(o,t,l){var i,u=r.get("key-value-editor.html");o.validation={key:o.keyValidator,val:o.valueValidator},l.keyValidatorRegex&&(o.validation.key=o.keyValidatorRegex),l.valueValidatorRegex&&(o.validation.val=o.valueValidatorRegex),"grabFocus"in l&&(o.grabFocus=!0,a(function(){o.grabFocus=void 0})),p("cannotAdd",l,o),p("showHeader",l,o),p("allowEmptyKeys",l,o),"cannotDelete"in l&&(o.cannotDeleteAny=!0),"isReadonly"in l&&(o.isReadonlyAny=!0),"isReadonlyKeys"in l&&(i=o.$watch("entries",function(e){e&&(c(o.entries,function(e){e.isReadonlyKey=!0}),i())})),"cannotSort"in l&&(u=u.replace(/as-sortable/g,"as-sortable-DISABLED"),o.cannotSort=!0),angular.extend(o,{keyMinlength:n.keyMinlength||l.keyMinlength,keyMaxlength:n.keyMaxlength||l.keyMaxlength,valueMinlength:n.valueMinlength||l.valueMinlength,valueMaxlength:n.valueMaxlength||l.valueMaxlength,keyValidator:n.keyValidator||l.keyValidator,valueValidator:n.valueValidator||l.valueValidator,keyValidatorError:n.keyValidatorError||l.keyValidatorError,valueValidatorError:n.valueValidatorError||l.valueValidatorError,keyRequiredError:n.keyRequiredError||l.keyRequiredError,keyValidatorErrorTooltip:n.keyValidatorErrorTooltip||l.keyValidatorErrorTooltip,keyValidatorErrorTooltipIcon:n.keyValidatorErrorTooltipIcon||l.keyValidatorErrorTooltipIcon,valueValidatorErrorTooltip:n.valueValidatorErrorTooltip||l.valueValidatorErrorTooltip,valueValidatorErrorTooltipIcon:n.valueValidatorErrorTooltipIcon||l.valueValidatorErrorTooltipIcon,secretValueTooltip:n.secretValueTooltip||l.secretValueTooltip,secretValueIcon:n.secretValueIcon||l.secretValueIcon,keyPlaceholder:n.keyPlaceholder||l.keyPlaceholder,valuePlaceholder:n.valuePlaceholder||l.valuePlaceholder}),t.append(e(u)(o))},controller:["$scope","$timeout",function(e){var o=[],r=[],t=d++;angular.extend(e,{unique:t,forms:{},placeholder:y(),setFocusKeyClass:"key-value-editor-set-focus-key-"+t,setFocusValClass:"key-value-editor-set-focus-value-"+t,uniqueForKey:f,uniqueForValue:k,dragControlListeners:{accept:function(e,o){return e.itemScope.sortableScope.$id===o.$id},orderChanged:function(){e.forms.keyValueEditor.$setDirty()}},deleteEntry:function(o,r){e.entries.splice(o,r),!e.entries.length&&e.addRowLink&&v(e.entries),e.forms.keyValueEditor.$setDirty()},isReadonlySome:function(e){return u(o,e)},cannotDeleteSome:function(e){return u(r,e)},onFocusLastKey:function(){v(e.entries),V("."+e.setFocusKeyClass),a(function(){e.placeholder.name=""},s)},onFocusLastValue:function(){v(e.entries),V("."+e.setFocusValClass),a(function(){e.placeholder.value=""},s)},onAddRow:function(){v(e.entries),V("."+e.setFocusKeyClass)},hasKey:function(o,r){if(!e.allowEmptyKeys){var a=e.forms.keyValueEditor[f(t,r)].$viewValue;a?e.forms.keyValueEditor[f(t,r)].$setValidity("noKey",!0):e.forms.keyValueEditor[f(t,r)].$setValidity("noKey",!1)}}}),e.$watch("cannotDelete",function(o){angular.isArray(o)&&(e.cannotDeleteAny=!1,r=o)}),e.$watch("isReadonly",function(r){angular.isArray(r)&&(e.isReadonlyAny=!1,o=r)}),e.$watch("addRowLink",function(o){angular.isDefined(o)&&(e.addRowLink=o||"Add row",e.entries&&!e.entries.length&&v(e.entries))}),e.$watch("entries",function(o){o&&!o.length&&v(e.entries)})}]}}])}(),function(){"use strict";angular.module("key-value-editor").provider("keyValueEditorConfig",[function(){var e={keyMinlength:"",keyMaxlength:"",valueMinlength:"",valueMaxlength:"",keyValidator:"[a-zA-Z0-9-_]+",valueValidator:"",keyValidatorError:"Validation error",keyValidatorErrorTooltip:void 0,keyValidatorErrorTooltipIcon:"pficon pficon-help",valueValidatorError:"Validation error",valueValidatorErrorTooltip:void 0,valueValidatorErrorTooltipIcon:"pficon pficon-help",secretValueTooltip:void 0,secretValueIcon:"fa fa-user-secret",keyPlaceholder:"",valuePlaceholder:"",keyRequiredError:"Key is required"};this.set=function(o,r){angular.isObject(o)?angular.extend(e,o):e[o]=r},this.$get=[function(){return e}]}])}(),function(){"use strict";angular.module("key-value-editor").factory("keyValueEditorUtils",[function(){var e=function(){},o=function(e,o,r){for(var a=e&&e.length||0,t=0;a>t;t++)r=o(r,e[t],t,e);return r},r=function(e,o){for(var r=e&&e.length||0,a=0;r>a;a++)o(e[a],a,e)},a=function(e,o){for(var r=e&&e.length||0,a=[],t=0;r>t;t++)a.push(o(e[t],t,e));return a},t=function(e){return o(e,function(e,o){return o&&e.push(o),e},[])},n=function(e,o){return-1!==e.indexOf(o)},l=function(e){return e&&e[e.length-1]},i=function(e){return e&&e[0]},u=function(e,o){return e&&e[o]},c=["valueAlt","isReadOnly","isReadonlyKey","cannotDelete","keyValidator","valueValidator","keyValidatorError","valueValidatorError","keyIcon","keyIconTooltip","valueIcon","valueIconTooltip","keyValidatorErrorTooltip","keyValidatorErrorTooltipIcon","valueValidatorErrorTooltip","valueValidatorErrorTooltipIcon"],d=function(e){return r(c,function(o){delete e[o]}),e},s=function(e){return a(e,d)},y=function(e){return t(a(e,function(e){return e=d(e),e.name||e.value?e:void 0}))},v=function(e){return o(y(e),function(e,o){return e[o.name]=o.value,e},{})};return{noop:e,each:r,reduce:o,compact:t,contains:n,first:i,last:l,get:u,cleanEntry:d,cleanEntries:s,compactEntries:y,mapEntries:v}}])}();